plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = "blue"))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red"))
plot_time
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red"))
Complaint_Lookup = c("Animal Abuse", "Water Conservation", "OUTSIDE BUILDING", "Non-Residential Heat", "DOOR/WINDOW", "Animal Abuse")
Complaint_Lookup = c("Animal Abuse", "Water Conservation", "OUTSIDE BUILDING", "Non-Residential Heat", "DOOR/WINDOW", "Animal Abuse")
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red"))
Complaint_Lookup = c("HEAT/HOT WATER")
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red"))
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms))
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms ))
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms ))
plot_anom
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red"))
plot_time
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms))
plot_anom
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = Complaint))
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = Complaint))
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "blue"))
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = Complaint))
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = Complaint)) +
ggtitle("Anamoly Detection for Heat and Hot Water")
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water")
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water")+
guides(fill=FALSE)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
geom_line() +
guides(fill=FALSE)
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water")+
guides(fill=FALSE)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
guides(fill=FALSE) +
geom_line() +
guides(fill=FALSE)
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water")
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
guides(fill=FALSE) +
geom_line() +
guides(fill=FALSE)
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
guides(fill=FALSE)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
guides(fill=FALSE) +
geom_line() +
guides(fill=FALSE)
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none")
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)+ theme(legend.position = "none")
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+
guides(fill=FALSE) +
geom_line() +
guides(fill=FALSE)
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none")
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none")
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
df_all = group_by(df_2,Date)
df3_all = summarise(df2, count = n())
df3_all
df3_all = df3_all[,c(0,-1,2)]
df3_all = df3_all[,-1]
ggplot(df3_all, aes(x=Date, y=count ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
df3_all
df3_all = summarise(df2, count = n())
df3_all = df3_all[,-2]
ggplot(df3_all, aes(x=Date, y=count ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
df2 = group_by(df,Date)
df3 = summarise(df2, count = n())
res = AnomalyDetectionTs(df3, max_anoms=0.02, direction='both', plot=TRUE,piecewise_median_period_weeks = 3)
beg = as.Date("2016-01-04")
end = as.Date("2016-01-05")
res$plot
res$anoms[order(res$anoms$anoms),]
ggplot(df3,aes(x = Date,y = count))+
geom_line() +
xlim(as.POSIXct("2013-01-20"),as.POSIXct("2013-01-24"))
res$anoms[order(res$anoms$anoms),]
res$plot
xlab("test")
res$plot+
xlab("test")
res$plot+
xlab("test") +
ggtitle("test2")
res$plot+
xlab("test") +
ggtitle("test2")+
xlim(as.POSIXct("2015-01-01"),as.POSIXct("2015-12-31"))
res$plot+
xlab("test") +
ggtitle("test2")+
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))
res$plot+
xlab("Date") +
ylab("Number of Complaints per Day")
ggtitle("2014-2015 Anomalies of Total Complaints")+
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))
res$plot+
xlab("Date") +
ylab("Number of Complaints per Day") +
ggtitle("2014-2015 Anomalies of Total Complaints")+
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))
res$plot+
xlab("Date") +
ylab("Number of Complaints per Day") +
ggtitle("2014-2015 Anomalies of Total Complaints")+
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))+
geom_point(x = as.Date("2016-01-05"), y= 11,000)
res$plot+
xlab("Date") +
ylab("Number of Complaints per Day") +
ggtitle("2014-2015 Anomalies of Total Complaints")+
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))+
geom_point(aes(x = as.Date("2016-01-05"), y= 11,000))
res$plot+
xlab("Date") +
ylab("Number of Complaints per Day") +
ggtitle("2014-2015 Anomalies of Total Complaints")+
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))+
geom_point(aes(x = as.Date("2016-01-05"), y= 11,000), color = "red")
res$plot+
xlab("Date") +
ylab("Number of Complaints per Day") +
ggtitle("2014-2015 Anomalies of Total Complaints")+
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))+
geom_point(aes(x = as.POSIXct("2016-01-05"), y= 11,000), color = "red")
df2 = group_by(df,Date)
df3_all = summarise(df2, count = n())
df3_all = df3_all[,-2]
res = AnomalyDetectionTs(df3_all, max_anoms=0.02, direction='both', plot=TRUE,piecewise_median_period_weeks = 3)
df3_all
df2 = group_by(df,Date)
df3_all = summarise(df2, count = n())
df3_all
res = AnomalyDetectionTs(df3_all, max_anoms=0.02, direction='both', plot=TRUE,piecewise_median_period_weeks = 3)
res
ggplot(df3_all, aes(x=Date, y=count ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = res$anoms, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
ggplot(df3_all, aes(x=Date, y=count, color = "red" ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = res$anoms, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
ggplot(df3_all, aes(x=Date, y=count, color = "red" ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = res$anoms, aes(x = timestamp, y = anoms, colour = "blue")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
ggplot(df3_all, aes(x=Date, y=count, color = "blue" ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = res$anoms, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
res$anoms
res$anoms[order(res$anoms$anoms),]
ggplot(df3_all, aes(x=Date, y=count, color = "blue" ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = res$anoms, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
ggplot(df3_all, aes(x=Date, y=count, color = "blue" ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = res$anoms, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Complaint Dataset") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
df4 = filter(df3, Date < "2015-01-08"  & "2015-01-06" < Date)
plot_anom = filter(anom_df, timestamp > as.POSIXct("2015-01-07")  & as.POSIXct("2015-01-08") >= timestamp)
plot_anom2 = filter(plot_anom,Complaint != "HEAT/HOT WATER")
ggplot(plot_anom2) +
geom_bar(aes(x=Complaint,y=anoms, fill = Complaint), stat="identity") +
coord_flip() +
guides(fill=FALSE)
ggplot(plot_anom2) +
geom_bar(aes(x=Complaint,y=anoms, fill = Complaint), stat="identity") +
coord_flip() +
guides(fill=FALSE) +
xlab("Number of Complaints") +
ggtitle("Anomalies Detected on Jan 8th, 2015 ")
ggplot(plot_anom2) +
geom_bar(aes(x=Complaint,y=anoms, fill = Complaint), stat="identity") +
coord_flip() +
guides(fill=FALSE) +
ylab("Number of Complaints") +
ggtitle("Anomalies Detected on Jan 8th, 2015 ")
Complaint_Lookup = c("Animal Abuse", "Water Conservation", "OUTSIDE BUILDING", "Non-Residential Heat", "DOOR/WINDOW", "Animal Abuse")
#Complaint_Lookup = c("HEAT/HOT WATER")
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
df_2 = df[, c("Complaint.Type","Date")]
df2 = group_by(df_2,Date,Complaint.Type)
df3 = summarise(df2, count = n())
Complaint_Lookup = c("Animal Abuse", "Water Conservation", "OUTSIDE BUILDING", "Non-Residential Heat", "DOOR/WINDOW", "Animal Abuse")
#Complaint_Lookup = c("HEAT/HOT WATER")
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
ggplot(df3_all, aes(x=Date, y=count, color = "blue" ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = res$anoms, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Complaint Dataset") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")+
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day")
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type ))+ theme(legend.position = "none") +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
theme(legend.position = "none") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "red")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-12-31"))
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2015-01-01"),as.POSIXct("2015-12-31"))
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2015-01-01"),as.POSIXct("2015-01-31"))
plot_anom = filter(anom_df, timestamp > as.POSIXct("2015-01-07")  & as.POSIXct("2015-01-08") >= timestamp)
plot_anom2 = filter(plot_anom,Complaint != "HEAT/HOT WATER")
plot_anom2
plot_anom2
anom_df
library(dplyr)
library(ggplot2)
library(knitr)
#install.packages("devtools")
#devtools::install_github("twitter/AnomalyDetection")
library(AnomalyDetection)
library(googleVis)
op <- options(gvis.plot.tag='chart')
setwd("/Users/bobminnich/Documents/Columbia/Courses/DataVisualization/Final_Project/Edav-P4")
#df = read.csv("311_full.csv")
#saveRDS(df,"full_filtered2.rds")
#Filter for noises
#Noise_filter = grepl("Noise",df$Complaint.Type)
#df.noise = df[Noise_filter,]
#setwd("/Users/bobminnich/Documents/Columbia/Courses/Applied_Data_Science/")
#df = read.csv("311_1 Year.csv")
#df = read.csv("311_Full_Filtered.csv")
#df = df[1:(nrow(df)/8),]
df = readRDS("full_filtered2.rds")
#setwd("/Users/bobminnich/Documents/Columbia/Courses/Applied_Data_Science/project2-group3/doc")
df4 = filter(df3, Date < "2015-01-08"  & "2015-01-06" < Date)
plot_anom = filter(anom_df, timestamp > as.POSIXct("2015-01-07")  & as.POSIXct("2015-01-08") >= timestamp)
plot_anom2 = filter(plot_anom,Complaint != "HEAT/HOT WATER")
ggplot(plot_anom2) +
geom_bar(aes(x=Complaint,y=anoms, fill = Complaint), stat="identity") +
coord_flip() +
guides(fill=FALSE) +
ylab("Number of Complaints") +
ggtitle("Anomalies Detected on Jan 8th, 2015 ")
ggplot(df3, aes(x=Date, y=count, colour = "blue"))+
geom_line() +
geom_point(data = anom_df, aes(x = timestamp, y = anoms, colour = "red"))+
xlim(as.POSIXct("2013-01-20"),as.POSIXct("2013-01-24"))+
ggplot(df3, aes(x=Date, y=count, colour = "blue"))+
geom_line() +
geom_point(data = anom_df, aes(x = timestamp, y = anoms, colour = "red"))+
xlim(as.POSIXct("2013-01-20"),as.POSIXct("2013-01-24"))+
ggplot(df3, aes(x=Date, y=count, colour = "blue"))+
geom_line() +
geom_point(data = anom_df, aes(x = timestamp, y = anoms, colour = "red"))+
xlim(as.POSIXct("2013-01-20"),as.POSIXct("2013-01-24"))
df_2 = df[, c("Complaint.Type","Date")]
df2 = group_by(df_2,Date,Complaint.Type)
df3 = summarise(df2, count = n())
Complaint_Lookup = c("Animal Abuse", "Water Conservation", "OUTSIDE BUILDING", "Non-Residential Heat", "DOOR/WINDOW", "Animal Abuse")
#Complaint_Lookup = c("HEAT/HOT WATER")
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2015-01-01"),as.POSIXct("2015-01-31"))
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2014-01-01"),as.POSIXct("2015-01-31"))
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Heat and Hot Water") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2013-01-01"),as.POSIXct("2015-01-31"))
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Multiple Complaints") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2013-01-01"),as.POSIXct("2015-01-07"))
Complaint_Lookup = c("Animal Abuse", "Water Conservation", "OUTSIDE BUILDING", "Non-Residential Heat",  "Animal Abuse")
#Complaint_Lookup = c("HEAT/HOT WATER")
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Multiple Complaints") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2013-01-01"),as.POSIXct("2015-01-07"))
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Multiple Complaints") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2013-01-01"),as.POSIXct("2015-01-07"))+
xlim(0,150)
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Multiple Complaints") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2013-01-01"),as.POSIXct("2015-01-07"))+
ylim(0,150)
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Multiple Complaints") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2013-01-01"),as.POSIXct("2015-01-07"))+
ylim(0,125)
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Multiple Complaints") +
ylab("Number of Complaints per Day") +
#xlim(as.POSIXct("2013-01-01"),as.POSIXct("2015-01-07"))+
ylim(0,125)
plot_time
max(plot_time$Date)
plot_time = filter(df3,Complaint.Type %in% Complaint_Lookup )
anom_df$timestamp = as.POSIXct(anom_df$timestamp)
plot_anom = filter(anom_df, Complaint == Complaint_Lookup)
ggplot(plot_time, aes(x=Date, y=count, colour = Complaint.Type )) +
geom_line() +
geom_point(data = plot_anom, aes(x = timestamp, y = anoms, colour = "Anamolies")) +
ggtitle("Anamoly Detection for Multiple Complaints") +
ylab("Number of Complaints per Day") +
xlim(as.POSIXct("2014-01-01"),max(plot_time$Date))+
ylim(0,125)
ggplot(plot_anom2) +
geom_bar(aes(x=Complaint,y=anoms, fill = Complaint), stat="identity",colour = "Anamolies") +
coord_flip() +
guides(fill=FALSE) +
ylab("Number of Complaints") +
ggtitle("Anomalies Detected on Jan 8th, 2015 ")
anom_df
dim(anom_df)
unique(anom_df$Complaint)
length(unique(anom_df$Complaint))
sum(anom_df$anoms)
